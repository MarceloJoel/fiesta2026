<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Invitados</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f9; padding: 20px; color: #333; }
        .container { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        h1, h2 { text-align: center; color: #2c3e50; }
        .stats { background: #e8f4fd; padding: 10px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-weight: bold; }
        input, button { width: 100%; padding: 10px; margin: 5px 0; border-radius: 6px; border: 1px solid #ccc; box-sizing: border-box; }
        button { background-color: #27ae60; color: white; border: none; cursor: pointer; font-weight: bold; }
        button:hover { background-color: #219150; }
        .list-section { margin-top: 20px; }
        .item { display: flex; justify-content: space-between; align-items: center; padding: 8px; border-bottom: 1px solid #eee; }
        
        /* Estilos nuevos para asistencia */
        .guest-info { display: flex; align-items: center; gap: 10px; }
        .attendance-check { width: 18px; height: 18px; cursor: pointer; }
        .is-present { text-decoration: line-through; opacity: 0.6; } /* Opcional: tacha el nombre si asisti√≥ */

        .paid { color: #27ae60; font-weight: bold; }
        .pending { color: #e67e22; }
        .delete-btn { background: #ff7675; width: auto; padding: 2px 8px; font-size: 12px; border: none; color: white; border-radius: 4px; cursor: pointer;}
    </style>
</head>
<body>

    <div class="container">
        <h1>üéâ Lista de Fiesta</h1>

        <div class="stats">
            Total invitados: <span id="total-count">0</span>
        </div>
        
        <input type="text" id="nameInput" placeholder="Nombre del invitado">
        <input type="number" id="payInput" placeholder="¬øCu√°nto pag√≥?">
        <button onclick="addGuest()">Agregar / Actualizar</button>

        <hr>

        <div class="list-section">
            <h3>‚úÖ Pagaron (Cuota completa: 70 soles)</h3>
            <div id="paid-list"></div>
        </div>

        <div class="list-section">
            <h3>‚è≥ Falta Pagar</h3>
            <div id="pending-list"></div>
        </div>
    </div>

    <script>
        const CUOTA_TOTAL = 70;

        // A√±adida propiedad 'attended' para control de asistencia
        let guest = [
            { name: "Juan Valdivia", paid: 70, attended: false },
            { name: "Leonel Yalle", paid: 70, attended: false },
            { name: "Marcelo Rodriguez", paid: 70, attended: false },
            { name: "Erik Lapa", paid: 70, attended: false },
            { name: "Fabrizio Flores", paid: 70, attended: false },
            { name: "Harry Ayala", paid: 70, attended: false },
            { name: "Sony", paid: 70, attended: false },
            { name: "Mangel", paid: 70, attended: false },
            { name: "Shinu", paid: 70, attended: false },
            { name: "Michu", paid: 70, attended: false },
            { name: "Christian Carrasco", paid: 70, attended: false },
            { name: "Deyvid Ortega", paid: 0, attended: false },
            { name: "Edu", paid: 0, attended: false }
        ];

        function render(){
            const paidList = document.getElementById('paid-list');
            const pendingList = document.getElementById('pending-list');
            const totalCount = document.getElementById('total-count');
        
            paidList.innerHTML = '';
            pendingList.innerHTML = '';
            totalCount.innerText = guest.length;

            guest.forEach((g, index) => {
                const div = document.createElement('div');
                div.className = 'item';

                // Crear el checkbox de asistencia
                const checkHtml = `<input type="checkbox" class="attendance-check" ${g.attended ? 'checked' : ''} onchange="toggleAttendance(${index})">`;

                if (g.paid >= CUOTA_TOTAL) {
                    div.innerHTML = `
                        <div class="guest-info">
                            ${checkHtml}
                            <span class="paid ${g.attended ? 'is-present' : ''}">${g.name}</span>
                        </div>
                        <span>Completado</span>`;
                    paidList.appendChild(div);
                } else {
                    const missing = CUOTA_TOTAL - g.paid;
                    div.innerHTML = `
                        <div class="guest-info">
                            ${checkHtml}
                            <span class="pending ${g.attended ? 'is-present' : ''}">${g.name} (Falta: ${missing} S/)</span>
                        </div>
                        <button class="delete-btn" onclick="removeGuest(${index})">x</button>
                    `;
                    pendingList.appendChild(div);
                }
            });
        }

        // Funci√≥n para cambiar el estado de asistencia
        function toggleAttendance(index) {
            guest[index].attended = !guest[index].attended;
            render();
        }

        function addGuest() {
            const name = document.getElementById('nameInput').value;
            const paid = parseFloat(document.getElementById('payInput').value) || 0;

            if (name == "") return;

            const existing = guest.find(g => g.name.toLowerCase() === name.toLowerCase());
            if (existing) {
                existing.paid = paid;
            } else {
                // Al agregar uno nuevo, por defecto no ha asistido
                guest.push({ name, paid, attended: false });
            }

            render();
            document.getElementById('nameInput').value = '';
            document.getElementById('payInput').value = '';
        }

        function removeGuest(index) {
            guest.splice(index, 1);
            render();
        }

        render();
    </script>
</body>
</html>